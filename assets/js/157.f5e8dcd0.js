(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{613:function(t,a,s){"use strict";s.r(a);var e=s(3),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"动态热更新设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态热更新设置"}},[t._v("#")]),t._v(" 动态热更新设置")]),t._v(" "),a("h3",{attrs:{id:"背景需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景需求"}},[t._v("#")]),t._v(" 背景需求")]),t._v(" "),a("ul",[a("li",[t._v("前端本地代码是否可以给个链接后端同学访问测试，通过跑前端项目交互，调试接口。")])]),t._v(" "),a("h3",{attrs:{id:"解决思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决思路"}},[t._v("#")]),t._v(" 解决思路")]),t._v(" "),a("ul",[a("li",[t._v("开发编译的时候，由于我们本地是热更新，如果给后端同学一个本地的链接，他们的链接访问不执行热更新，我们前端开发的链接是热更新，这样就可以了。")]),t._v(" "),a("li",[t._v("vue项目的热更新是通过 "),a("code",[t._v("vue-hot-reload-api")]),t._v(" 依赖包实现的。我们找到这个依赖包的项目代码，添加判断是否执行热更新就可以了。")])]),t._v(" "),a("h3",{attrs:{id:"好处"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#好处"}},[t._v("#")]),t._v(" 好处")]),t._v(" "),a("ul",[a("li",[t._v("这样就方便后端同学，不用下载项目安装依赖，能够实时获取前端本地代码进行调式。")])]),t._v(" "),a("h3",{attrs:{id:"具体实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体实现"}},[t._v("#")]),t._v(" 具体实现")]),t._v(" "),a("ol",[a("li",[t._v("找到本地 "),a("code",[t._v("node_modules/vue-hot-reload-api/dist/index.js")]),t._v(" 文件,")]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("exports.createRecord")]),t._v(" 函数第一行添加以下代码")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/hot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("比如编译生成的链接是 "),a("code",[t._v("http://[your id address]:8080/#/")]),t._v(",  只需把链接更改下, 在#号前面加"),a("code",[t._v("hot")]),t._v(", 如下")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("http://[your id address]:8080/hot#/\n")])])]),a("p",[t._v("把"),a("code",[t._v("http://[your id address]:8080/hot#/")]),t._v("链接发给后端，自己本地的链接就用 "),a("code",[t._v("http://[your id address]:8080/#/")])]),t._v(" "),a("p",[t._v("这样我们本地开发写代码保存。后端拿到的链接不会自动热更新了，他们收到刷新就可以拿到我们最新代码。")])])}),[],!1,null,null,null);a.default=r.exports}}]);