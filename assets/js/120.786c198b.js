(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{574:function(s,t,a){"use strict";a.r(t);var n=a(3),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"git-hook-自动部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-hook-自动部署"}},[s._v("#")]),s._v(" git hook 自动部署")]),s._v(" "),t("p",[s._v("本文章教大家，使用git hook来实现本地开发代码一行命令自动上传到远程服务器。")]),s._v(" "),t("h2",{attrs:{id:"第一步创建空git仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步创建空git仓库"}},[s._v("#")]),s._v(" 第一步创建空git仓库")]),s._v(" "),t("p",[s._v("终端进入你需要放项目的文件夹，可以通过ssh root@host 链接服务器，\ncd 命令进入你的文件夹， 这个是需要大家会一些linux命令，这里我就不介绍了。")]),s._v(" "),t("p",[s._v("进入文件夹后，先初始化git")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("git init\n")])])]),t("p",[s._v("然后使用下面一行代码，使得你这个文件夹创建个空仓库，接受代码提交")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("git config receive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("denyCurrentBranch ignore\n")])])]),t("p",[s._v("下面我们进入 git 的hook文件做修改，来使用hook监听代码提交后自动拉取代码到我们的项目文件夹。\n进入.git/hooks")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("cd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("git"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hooks\n")])])]),t("p",[s._v("创建post-receive hook钩子， 类似我们vue的生命周期函数，监听代码push到远程仓库后进行操作")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("touch post"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("receive\n")])])]),t("p",[s._v("然后用vim编辑器打开 post-receive 写入代码")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vim post"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("receive\n")])])]),t("p",[s._v("将以下内容复制到⽂件中 （输⼊i，复制粘贴，按 Esc 退出insert模式，按 :wq 保存退出）")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token hashbang comment"}},[s._v("#!/bin/sh")]),s._v("\nunset "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GIT_DIR")]),s._v("\ncd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wwwroot"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yourproject\ngit checkout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f\n")])])]),t("p",[t("b",{staticStyle:{color:"red"}},[s._v("注释说明： cd /www/wwwroot/yourproject   这里的路径是你的服务器项目地址。")])]),s._v(" "),t("p",[s._v("授予post-receive可执⾏权限")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("chmod "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("x post"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("receive\n")])])]),t("p",[s._v("这样，⼀个空的git仓库就在服务器上建好了，仓库的地址为：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ssh")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deployuser@ipaddress"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wwwroot"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yourproject"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("git\n")])])]),t("p",[s._v("注：deployuser：⽤户名、 ipaddress：服务器ip地址 /www/wwwroot/yourproject/.git :你项目路径的.git文件夹")]),s._v(" "),t("h2",{attrs:{id:"第二步添加公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步添加公钥"}},[s._v("#")]),s._v(" 第二步添加公钥")]),s._v(" "),t("p",[s._v("本地生成ssh key 复制添加到服务器上面， 本地"),t("RouterLink",{attrs:{to:"/tool/sshkey.html"}},[s._v("生成ssh key")]),s._v("，可以看我的另一篇文章"),t("RouterLink",{attrs:{to:"/tool/sshkey.html"}},[s._v("生成ssh key")]),s._v("\n生成ssh key后 复制到剪切板")],1),s._v(" "),t("p",[s._v("在服务器终端执行下面代码，打开 .ssh/authorized_keys 文件添加我们本地的 ssh key, 这样可以免账号密码推送代码， 多人开发时，只需要回车空行添加多个 ssh key就好。")]),s._v(" "),t("p",[s._v("vim 编辑器打开 复制剪切板的 ssh key  （输⼊i，复制粘贴，按 Esc 退出insert模式，按 :wq 保存退出）")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vi "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ssh"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("authorized_keys\n")])])]),t("p",[s._v("服务器上面的配置做好了， 接下来的是本地电脑的配置")]),s._v(" "),t("h2",{attrs:{id:"第三步创建bash脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步创建bash脚本"}},[s._v("#")]),s._v(" 第三步创建bash脚本")]),s._v(" "),t("p",[s._v("根⽬录添加 deploy.sh ⽂件,文件内的代码如下：")]),s._v(" "),t("p",[t("b",[s._v("vue 项目的配置")]),s._v("  执行vue 打包命令，执行完进入 dist文件夹创建git，四步走推送到服务器仓库，服务器的hook钩子会监听到自动拉取代码")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保脚本抛出遇到的错误")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ⽣成静态⽂件")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进⼊⽣成的⽂件夹")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" dist\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f ssh://root@120.79.193.236/www/wwwroot/m_web/.git master\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])])]),t("p",[s._v("ssh://root@120.79.193.236/www/wwwroot/m_web/.git 是你上面服务器创建好的空git仓库地址")]),s._v(" "),t("p",[s._v("在package.json srcipts 添加一行")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"deploy"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bash deploy.sh"')]),s._v("\n")])])]),t("p",[s._v("打包发布")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm run deploy\n")])])]),t("p",[s._v("这样就大功告成了。")]),s._v(" "),t("p",[s._v("如果想其他非vue打包的项目怎么办呢，我们是可以利用webpack打包工具来帮助我们。\n思路是，把当前项目复制一份，然后再写个deploy脚本执行git的四步走。")]),s._v(" "),t("p",[s._v("下面直接上代码：\n没有 package.json文件的话，先 npm init 初始化")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm init\n")])])]),t("p",[s._v("安装需要的依赖包")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm i -D  webpack webpack-cli clean-webpack-plugin copy-webpack-plugin\n")])])]),t("p",[s._v("clean-webpack-plugin 是 删除文件插件")]),s._v(" "),t("p",[s._v("copy-webpack-plugin  是 复制文件插件")]),s._v(" "),t("p",[s._v("根目录新建 webpack.config.js 文件，里面代码如下：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" CopyPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'copy-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("CleanWebpackPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'clean-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'main.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//入口,要使用webpack打包那个文件。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出文件的配置")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定到那个目录中去")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bundle.js"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定输出文件的名称")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开发环境还是生产环境")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 复制根目录下所有文件，并粘贴到./dist文件夹里面去，")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CopyPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("patterns")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("from")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'**/*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("globOptions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 忽略不复制文件")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ignore")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'**/dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'**/node_modules'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 复制前清除dist文件夹")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CleanWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("在package.json的scripts添加一行：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"copy"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),s._v("\n")])])]),t("p",[s._v("这时候的根目录下的 deploy.sh文件代码如下：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("# 确保脚本抛出遇到的错误\nset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e\n\n# 复制文件\nnpm run copy\n\n# 进入生成的文件夹\ncd dist\n\ngit init\ngit add "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("A")]),s._v("\ngit commit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\ngit push "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f ssh"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("118.25")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".48")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".195")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yourproject"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("git master\n\ncd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n")])])]),t("p",[s._v("打包发布")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm run deploy\n")])])]),t("p",[s._v("完美解决各个打包上传代码到服务器，这里涉及的知识点，linux命令操作，生成ssh key，webpack配置. 看不明白的，多仔细跟着看多几遍，注意路径文件问题，一步一步仔细跟着操作，就可以的了，有什么问题也可以在下面评论留言。")]),s._v(" "),t("Vssue",{attrs:{options:{locale:"zh"}}})],1)}),[],!1,null,null,null);t.default=e.exports}}]);