(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{583:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vscode-扩展开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vscode-扩展开发"}},[t._v("#")]),t._v(" vscode 扩展开发")]),t._v(" "),s("h2",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),s("p",[t._v("官方为了方便开发人员进行vscode插件的开发，提供了对yo应的脚手架来生成对应的项目。"),s("a",{attrs:{href:"https://code.visualstudio.com/api/get-started/your-first-extension",target:"_blank",rel:"noopener noreferrer"}},[t._v("vscode 扩展开发官方文档"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局安装需要的包")]),t._v("\nnpm install "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g yo generator"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("code\n\n")])])]),s("p",[t._v("在 mac 安装失败，报错没有权限 "),s("code",[t._v("permission denied")]),t._v(" 字眼的时候，可以加 "),s("code",[t._v("sudo")]),t._v(" 来授权")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局安装需要的包")]),t._v("\nsudo npm install "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g yo generator"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("code\n")])])]),s("blockquote",[s("p",[t._v("上述命令其实安装了两个包（"),s("code",[t._v("yo")]),t._v(" 和 "),s("code",[t._v("generator-code")]),t._v(")，这两个包用途如下：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("yo模块全局安装后就安装了Yeoman，Yeoman是通用型项目脚手架工具，可以根据一套模板，生成一个对应的项目结构\ngenerator-code模块是VS Code扩展生成器，与yo配合使用才能构建项目。\n")])])]),s("h2",{attrs:{id:"项目初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目初始化"}},[t._v("#")]),t._v(" 项目初始化")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 运行")]),t._v("\nyo code\n")])])]),s("p",[t._v("执行 yo code之后，会有下面几个选项：")]),t._v(" "),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/1.png")}}),t._v(" "),s("ul",[s("li",[t._v("? What type of extension do you want to create(您想要创建什么类型的扩展?)? New Extension ("),s("code",[t._v("JavaScript")]),t._v(")")]),t._v(" "),s("li",[t._v("? What's the name of your extension(你的分机名是什么，也就是项目名)? "),s("code",[t._v("hello")])]),t._v(" "),s("li",[t._v("? What's the identifier of your extension（你的扩展的标识符是什么）? "),s("code",[t._v("hello")])]),t._v(" "),s("li",[t._v("? What's the description of your extension（什么是您的扩展的描述）? "),s("code",[t._v("learn vscode plugin")])]),t._v(" "),s("li",[t._v("? Enable JavaScript type checking in 'jsconfig.json'（在'jsconfig.json'中启用JavaScript类型检查）? "),s("code",[t._v("Yes")])]),t._v(" "),s("li",[t._v("? Initialize a git repository（初始化一个git仓库）? "),s("code",[t._v("Yes")])]),t._v(" "),s("li",[t._v("? bundel the source code with webpack (是否用webpack打包源码)？ "),s("code",[t._v("Yes")])]),t._v(" "),s("li",[t._v("? Which package manager to use（使用哪个包管理器）? "),s("code",[t._v("npm")])])]),t._v(" "),s("p",[t._v("上面标红的是我的选择")]),t._v(" "),s("p",[t._v("在项目生成之后，目录结构如下所示")]),t._v(" "),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/2.png")}}),t._v(" "),s("p",[t._v("然后，在编辑器中，按"),s("code",[t._v("F5")]),t._v("。这将在新的扩展开发主机窗口中编译和运行扩展。")]),t._v(" "),s("p",[t._v("在新窗口中从命令面板 ( shift + win + p )运行"),s("code",[t._v("Hello World")]),t._v("命令：")]),t._v(" "),s("p",[t._v("您 vscode 界面会看到"),s("code",[t._v("Hello World from HelloWorld!")]),t._v("显示的通知。成功！")]),t._v(" "),s("p",[t._v("在项目生成之后，其中"),s("strong",[t._v("最重要的文件")]),t._v("是"),s("code",[t._v("package.json")]),t._v("和"),s("code",[t._v("extension.js")]),t._v("，了解这两个文件基本上就可以入门开发一个vscode插件了。")]),t._v(" "),s("h2",{attrs:{id:"package-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[t._v("#")]),t._v(" package.json")]),t._v(" "),s("p",[t._v("该文件是vscode扩展的清单文件，里面有很多字段，"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/extension-manifest",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方"),s("OutboundLink")],1),t._v("对每个字段都进行了详细阐述，本次我们重点阐述以下初始化后期清单文件。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件名")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"displayName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示在应用市场的名字")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"learn vscode plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 具体描述")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件的版本号")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"publisher"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aliwang"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发布publisher账户名")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"engines"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"vscode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.60.0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最低支持的vscode版本")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"categories"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Other"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 扩展类别")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 激活事件组，在那些事件情况下被激活")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onCommand:hello.helloWorld"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件的主入口文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"main"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./extension.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 贡献点")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"contributes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"commands"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"command"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello.helloWorld"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"lint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint ."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"pretest"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run lint"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node ./test/runTest.js"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发依赖项")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"devDependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"@types/vscode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.63.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"@types/glob"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.1.4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"@types/mocha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^9.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"@types/node"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"eslint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^8.1.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"glob"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.1.7"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"mocha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^9.1.3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"typescript"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.4.4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"@vscode/test-electron"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.6.2"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),t._v(" "),s("p",[t._v("在这"),s("code",[t._v("package.json")]),t._v("文件中，重点关注的主要有三部分内容："),s("code",[t._v("activationEvents")]),t._v("、"),s("code",[t._v("main")]),t._v("以及"),s("code",[t._v("contributes")]),t._v("，其是整个文件中的重中之重。")]),t._v(" "),s("h3",{attrs:{id:"main"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#main"}},[t._v("#")]),t._v(" main")]),t._v(" "),s("p",[t._v("指明了该插件的主入口在哪，只有找到主入口整个项目才能正常的运转")]),t._v(" "),s("h3",{attrs:{id:"activationevents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#activationevents"}},[t._v("#")]),t._v(" activationEvents")]),t._v(" "),s("p",[t._v("指明该插件在何种情况下才会被激活，因为只有激活后插件才能被正常使用，官网已经指明了"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/activation-events",target:"_blank",rel:"noopener noreferrer"}},[t._v("激活的时机"),s("OutboundLink")],1),t._v("，这样我们就可以按需设置对应时机。（具体每个时机用的时候详细查看即可）")]),t._v(" "),s("ul",[s("li",[t._v('onLanguage 打开解析为特定语言文件时被激活，例如"onLanguage:python"')]),t._v(" "),s("li",[t._v("onCommand 在调用命令时被激活")]),t._v(" "),s("li",[t._v("onDebug 在启动调试话之前被激活\n"),s("ul",[s("li",[t._v("onDebugInitialConfigurations")]),t._v(" "),s("li",[t._v("onDebugResolve")])])]),t._v(" "),s("li",[t._v("workspaceContains 每当打开文件夹并且该文件夹包含至少一个与 glob 模式匹配的文件时")]),t._v(" "),s("li",[t._v("onFileSystem 每当读取来自特定方案的文件或文件夹时")]),t._v(" "),s("li",[t._v("onView 每当在 VS Code 侧栏中展开指定 id 的视图")]),t._v(" "),s("li",[t._v("onUri 每当打开该扩展的系统范围的 Uri 时")]),t._v(" "),s("li",[t._v("onWebviewPanel")]),t._v(" "),s("li",[t._v("onCustomEditor")]),t._v(" "),s("li",[t._v("onAuthenticationRequest")])]),t._v(" "),s("ul",[s("li",[t._v("只要一启动vscode，插件就会被激活")])]),t._v(" "),s("ul",[s("li",[t._v("onStartupFinished")])]),t._v(" "),s("h3",{attrs:{id:"contributes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contributes"}},[t._v("#")]),t._v(" contributes")]),t._v(" "),s("p",[t._v("通过扩展注册contributes用来扩展Visual Studio Code中的各项技能，其有多个配置，如下所示：")]),t._v(" "),s("ul",[s("li",[t._v("breakpoints 断点")]),t._v(" "),s("li",[t._v("colors 主题颜色")]),t._v(" "),s("li",[t._v("commands 命令")]),t._v(" "),s("li",[t._v("configuration 配置")]),t._v(" "),s("li",[t._v("configurationDefaults 默认的特定于语言的编辑器配置")]),t._v(" "),s("li",[t._v("customEditors 自定义编辑器")]),t._v(" "),s("li",[t._v("debuggers")]),t._v(" "),s("li",[t._v("grammars")]),t._v(" "),s("li",[t._v("iconThemes")]),t._v(" "),s("li",[t._v("jsonValidation")]),t._v(" "),s("li",[t._v("keybindings 快捷键绑定")]),t._v(" "),s("li",[t._v("languages")]),t._v(" "),s("li",[t._v("menus")]),t._v(" "),s("li",[t._v("problemMatchers")]),t._v(" "),s("li",[t._v("problemPatterns")]),t._v(" "),s("li",[t._v("productIconThemes")]),t._v(" "),s("li",[t._v("resourceLabelFormatters")]),t._v(" "),s("li",[t._v("snippets 特定语言的片段")]),t._v(" "),s("li",[t._v("submenus")]),t._v(" "),s("li",[t._v("taskDefinitions")]),t._v(" "),s("li",[t._v("themes 颜色主题")]),t._v(" "),s("li",[t._v("typescriptServerPlugins")]),t._v(" "),s("li",[t._v("views")]),t._v(" "),s("li",[t._v("viewsContainers")]),t._v(" "),s("li",[t._v("viewsWelcome")]),t._v(" "),s("li",[t._v("walkthroughs")])]),t._v(" "),s("h2",{attrs:{id:"extension-js文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extension-js文件"}},[t._v("#")]),t._v(" extension.js文件")]),t._v(" "),s("p",[t._v("该文件时其入口文件，即 "),s("code",[t._v("package.json")]),t._v(" 中 "),s("code",[t._v("main")]),t._v(" 字段对应的文件（不一定叫extension.js这个名字），该文件中将导出两个方法："),s("code",[t._v("activate")]),t._v("和"),s("code",[t._v("deactivate")]),t._v("，两个方法的执行时机如下所示：")]),t._v(" "),s("h3",{attrs:{id:"activate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#activate"}},[t._v("#")]),t._v(" activate")]),t._v(" "),s("p",[t._v("这是插件被激活时执行的函数")]),t._v(" "),s("h3",{attrs:{id:"deactivate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deactivate"}},[t._v("#")]),t._v(" deactivate")]),t._v(" "),s("p",[t._v("这是插件被销毁时调用的方法，比如释放内存等。")]),t._v(" "),s("h2",{attrs:{id:"实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实战"}},[t._v("#")]),t._v(" 实战")]),t._v(" "),s("p",[t._v("上述已经对vscode插件有了基础的认识，下面就进行一个简单的实战，打造属于自己的一个vscode插件，此插件的功能如下：")]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("通过在文件编辑区域或文件名上右击弹出按钮，点击按钮获取文件的大小、创建时间和修改时间；")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("如果获取的是文件夹，则指明该文件是文件夹，不是文件，给予提示。")])])])]),t._v(" "),s("h3",{attrs:{id:"package-json-修改项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json-修改项"}},[t._v("#")]),t._v(" package.json 修改项")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ……")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在getFileState指令下激活")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onCommand:getFileState"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./extension.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contributes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commands"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getFileState"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"File State"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 菜单项")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"menus"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 编辑上下文菜单")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"editor/context"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"when"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"editorFocus"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getFileState"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"group"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"navigation"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 资源管理器上下文菜单")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"explorer/context"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getFileState"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"group"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"navigation"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ……")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"extension-js-主函数内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extension-js-主函数内容"}},[t._v("#")]),t._v(" extension.js 主函数内容")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vscode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vscode'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("activate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'插件已经被激活'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册命令")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" commandOfGetFileState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vscode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commands"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'getFileState'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("uri")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 文件路径")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" filePath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stats")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                vscode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showErrorMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("获取文件时遇到错误了")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("!!!")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isDirectory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                vscode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showWarningMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("检测的是文件夹，不是文件，请重新选择！！！")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" size "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" createTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("birthtime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLocaleString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" modifyTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mtime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLocaleString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                vscode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showInformationMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n                    文件大小为:")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("size"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("字节;\n                    文件创建时间为:")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("createTime"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(";\n                    文件修改时间为:")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("modifyTime"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n                ")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("modal")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stats "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("statSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stats'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'isFile'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将命令放入其上下文对象中，使其生效")]),t._v("\n    context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subscriptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("commandOfGetFileState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deactivate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    activate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    deactivate\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/3.gif")}}),t._v(" "),s("h2",{attrs:{id:"发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布"}},[t._v("#")]),t._v(" 发布")]),t._v(" "),s("p",[t._v("插件看法完毕之后就是需要分享出去供大家使用，目前有三种方式：")]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("直接把文件夹发给别人，让别人找到vscode的插件存放目录并放进去，然后重启vscode，一般不推荐；")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("打包成vsix插件，然后发送给别人安装，如果你的插件涉及机密不方便发布到应用市场，可以尝试采用这种方式；")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"3"}},[s("li",[t._v("注册开发者账号，发布到官网应用市场，这个发布和npm一样是不需要审核的。")])])])]),t._v(" "),s("h3",{attrs:{id:"打包成vsix插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包成vsix插件"}},[t._v("#")]),t._v(" 打包成vsix插件")]),t._v(" "),s("p",[t._v("每一种方式都可行，并且网上也有很多教程讲述其发布方式，今天我重点讲述一下第二种，毕竟在插件这么多的情况下，很多人更乐于开发一款属于自己的专用插件或者特定自己领域使用的插件，完全没必要发布到应用市场。")]),t._v(" "),s("h4",{attrs:{id:"安装对应的模块vsce"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装对应的模块vsce"}},[t._v("#")]),t._v(" 安装对应的模块vsce")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i vsce -g\n")])])]),s("h4",{attrs:{id:"利用vsce进行打包-生成对应的vsix文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#利用vsce进行打包-生成对应的vsix文件"}},[t._v("#")]),t._v(" 利用vsce进行打包，生成对应的vsix文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vsce package\n")])])]),s("p",[t._v("在项目根目录执行 "),s("code",[t._v("vsce package")]),t._v(" 命令之后，得到 "),s("code",[t._v("hello-0.0.1.vsix")]),t._v("文件")]),t._v(" "),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/4.png")}}),t._v(" "),s("p",[t._v("然后安装插件")]),t._v(" "),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/5.png")}}),t._v(" "),s("p",[t._v("安装成功，就可以直接用了")]),t._v(" "),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/6.png")}}),t._v(" "),s("h4",{attrs:{id:"发布到vscode应用市场"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布到vscode应用市场"}},[t._v("#")]),t._v(" 发布到vscode应用市场")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://code.visualstudio.com/api/working-with-extensions/publishing-extension#publishing-extensions",target:"_blank",rel:"noopener noreferrer"}},[t._v("vscode官网 发布扩展文档"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Visual Studio Code的应用市场基于微软自己的Azure DevOps，插件的身份验证、托管和管理都是在这里。")]),t._v(" "),s("ul",[s("li",[t._v("要发布到应用市场首先得有应用市场的"),s("code",[t._v("publisher")]),t._v("账号；")]),t._v(" "),s("li",[t._v("而要有发布账号首先得有"),s("code",[t._v("Azure DevOps")]),t._v("组织；")]),t._v(" "),s("li",[t._v("而创建组织之前，首先得创建"),s("code",[t._v("Azure")]),t._v("账号；")]),t._v(" "),s("li",[t._v("创建"),s("code",[t._v("Azure")]),t._v("账号首先得有"),s("code",[t._v("Microsoft")]),t._v("账号；")])]),t._v(" "),s("h4",{attrs:{id:"注册账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注册账号"}},[t._v("#")]),t._v(" 注册账号")]),t._v(" "),s("p",[t._v("首先访问 "),s("a",{attrs:{href:"https://login.live.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://login.live.com/"),s("OutboundLink")],1),t._v(" 登录你的"),s("code",[t._v("Microsoft")]),t._v("账号，没有的先注册一个。")]),t._v(" "),s("p",[t._v("登录你的"),s("code",[t._v("Microsoft")]),t._v("账号之后，按照文档在 Azure DevOps中"),s("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/azure/devops/organizations/accounts/create-organization?view=azure-devops",target:"_blank",rel:"noopener noreferrer"}},[t._v("创建自己的组织"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"创建令牌"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建令牌"}},[t._v("#")]),t._v(" 创建令牌")]),t._v(" "),s("p",[t._v("然后访问 "),s("a",{attrs:{href:"https://aka.ms/SignupAzureDevOps",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://aka.ms/SignupAzureDevOps"),s("OutboundLink")],1),t._v("进入你的组织。")]),t._v(" "),s("p",[t._v("从您组织的主页，打开您的个人资料图片旁边的用户设置下拉菜单，然后选择个人访问令牌：")]),t._v(" "),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/7.png")}}),t._v(" "),s("p",[t._v("在Personal Access Tokens页面上，选择"),s("code",[t._v("New Token")]),t._v("以创建新的 Personal Access Token 并设置以下详细信息：")]),t._v(" "),s("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/assets/img/tool/vscode/8.png")}}),t._v(" "),s("p",[s("strong",[s("code",[t._v("创建完成token之后，一定要自己手动复制保存好，平台不会帮你保存")])])]),t._v(" "),s("h4",{attrs:{id:"创建发布账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建发布账号"}},[t._v("#")]),t._v(" 创建发布账号")]),t._v(" "),s("p",[t._v("点击 "),s("a",{attrs:{href:"https://aka.ms/vscode-create-publisher",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://aka.ms/vscode-create-publisher"),s("OutboundLink")],1),t._v(" 去创建publisher账号")]),t._v(" "),s("p",[t._v("创建成功后，用 "),s("code",[t._v("vsce login your-publisher-name")]),t._v(" 来登录。 登录成功如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("hello git:(master) ✗ vsce login aliwang\nhttps://marketplace.visualstudio.com/manage/publishers/\nPersonal Access Token for publisher 'aliwang': ****************************************************\n\nThe Personal Access Token verification succeeded for the publisher 'aliwang'.\n")])])]),s("blockquote",[s("p",[t._v("注意：现在不能使用vsce以下命令创建新的发布者账号了，你执行 "),s("code",[t._v("vsce create-publisher your-publisher-name")]),t._v(", 就会报下面的错误")])]),t._v(" "),s("blockquote",[s("p",[t._v("ERROR  The 'create-publisher' command is no longer available. You can create a publisher directly in the Marketplace: https://aka.ms/vscode-create-publisher")])]),t._v(" "),s("h4",{attrs:{id:"发布应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布应用"}},[t._v("#")]),t._v(" 发布应用")]),t._v(" "),s("ul",[s("li",[s("ol",[s("li",[t._v("全局下载 "),s("code",[t._v("npm install -g vsce")])])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("项目打包 "),s("code",[t._v("vsce package")]),t._v(" （执行完打包命令会发现项目多了一个.vsix文件）")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"3"}},[s("li",[t._v("登录 "),s("code",[t._v("vsce login your-publisher-name")]),t._v(" （用上面创建的名称, 会提示你输入token，自己复制上面创建的token就可以了）")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"4"}},[s("li",[t._v("项目发布 "),s("code",[t._v("vsce publish")]),t._v(" (成功之后会弹出一个http链接，等上几分钟之后就可以去点击链接查看你发布的插件啦。或者去商店立搜索就可以啦！)")])])])]),t._v(" "),s("p",[t._v("根据上面步骤走，发布成功后大概需要过几分钟才能在应用市场搜到。过几分钟就可以访问网页版的插件主页："),s("a",{attrs:{href:"https://marketplace.visualstudio.com/manage/publishers",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://marketplace.visualstudio.com/manage/publishers"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"发布注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布注意事项"}},[t._v("#")]),t._v(" 发布注意事项")]),t._v(" "),s("ul",[s("li",[t._v("README.md 文件默认会显示在插件主页；")]),t._v(" "),s("li",[t._v("README.md 中的资源必须全部是HTTPS的，如果是HTTP会发布失败；")]),t._v(" "),s("li",[t._v("CHANGELOG.md 会显示在变更选项卡；")]),t._v(" "),s("li",[t._v("如果代码是放在git仓库并且设置了repository字段，发布前必须先提交git，否则会提示Git working directory not clean；")])]),t._v(" "),s("h4",{attrs:{id:"这里在发布时有几个常见错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这里在发布时有几个常见错误"}},[t._v("#")]),t._v(" 这里在发布时有几个常见错误：")]),t._v(" "),s("h4",{attrs:{id:"错误1-如前面所说-如果organization没有选择all-accessible-organizations-或者scopes没有选择full-access-发布的时候可能会报如下错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误1-如前面所说-如果organization没有选择all-accessible-organizations-或者scopes没有选择full-access-发布的时候可能会报如下错误"}},[t._v("#")]),t._v(" 错误1：如前面所说，如果"),s("code",[t._v("Organization")]),t._v("没有选择"),s("code",[t._v("all accessible organizations")]),t._v("，或者"),s("code",[t._v("Scopes")]),t._v("没有选择"),s("code",[t._v("Full access")]),t._v("，发布的时候可能会报如下错误：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Error: Failed Request: Unauthorized(401) - https://marketplace.visualstudio.com/_apis/gallery\nBe sure to use a Personal Access Token which has access to **all accessible accounts**.\nSee https://code.visualstudio.com/docs/tools/vscecli#_common-questions for more information.\n")])])]),s("h4",{attrs:{id:"错误2-error-missing-publisher-name-learn-more-https-code-visualstudio-com"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误2-error-missing-publisher-name-learn-more-https-code-visualstudio-com"}},[t._v("#")]),t._v(" 错误2：Error:Missing publisher name. Learn more:https://code.visualstudio.com...")]),t._v(" "),s("p",[t._v("解决方式：在"),s("code",[t._v("package.json")]),t._v("中将刚刚创建好的发布账号配置进去"),s("code",[t._v('"publisher":"your name"')]),t._v(",")]),t._v(" "),s("h4",{attrs:{id:"错误3-error-make-sure-to-edit-the-readme-md-file-before-you-publish-your-extension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误3-error-make-sure-to-edit-the-readme-md-file-before-you-publish-your-extension"}},[t._v("#")]),t._v(" 错误3：Error:Make sure to edit the README.md file before you publish your extension")]),t._v(" "),s("p",[t._v("解决方式：看下README.md文件中是否有http地址")]),t._v(" "),s("h4",{attrs:{id:"错误4-a-repository-field-is-missing-from-the-package-josn-manifest-file-do-you-want-to-continue-y-n"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误4-a-repository-field-is-missing-from-the-package-josn-manifest-file-do-you-want-to-continue-y-n"}},[t._v("#")]),t._v(" 错误4：A ‘repository’field is missing from the 'package.josn' manifest file .Do you want to continue? [y/n]")]),t._v(" "),s("p",[t._v("解决方式：y")]),t._v(" "),s("h4",{attrs:{id:"增量发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#增量发布"}},[t._v("#")]),t._v(" 增量发布")]),t._v(" "),s("p",[t._v("版本号："),s("code",[t._v("major.minor.patch")])]),t._v(" "),s("p",[t._v("如果想让发布之后版本号的"),s("code",[t._v("patch")]),t._v("自增，例如："),s("code",[t._v("1.0.2 -> 1.0.3")]),t._v("，可以这样：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vsce publish patch\n")])])]),s("p",[t._v("执行这个命令后会自动修改"),s("code",[t._v("package.json")]),t._v("里面的版本号。同理，"),s("code",[t._v("vsce publish minor")]),t._v("也是可以的。")]),t._v(" "),s("h4",{attrs:{id:"更新发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新发布"}},[t._v("#")]),t._v(" 更新发布")]),t._v(" "),s("p",[t._v("如果修改了插件代码想要重新发布，只需要"),s("code",[t._v("修改版本号")]),t._v("然后重新执行"),s("code",[t._v("vsce publish")]),t._v("即可。")]),t._v(" "),s("h4",{attrs:{id:"取消发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#取消发布"}},[t._v("#")]),t._v(" 取消发布")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vsce unpublish (publisher name).(extension name)\n")])])]),s("h4",{attrs:{id:"插件升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件升级"}},[t._v("#")]),t._v(" 插件升级")]),t._v(" "),s("ul",[s("li",[t._v("如果发布到了应用市场，那么一般来说会自动检测有没有新版本，有的话会自动无感知升级，但具体什么时候会去检测我还没有研究过，已经确定的是在扩展面板搜索插件名字会自动检测，重启vscode也会检测。")]),t._v(" "),s("li",[t._v("如果是打包成vsix，本地安装，那么只能自己实现升级检测功能呢，通过对比服务器上某个文件的版本号，具体我就不细讲了。")])]),t._v(" "),s("p",[t._v("参考文章：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000040720760",target:"_blank",rel:"noopener noreferrer"}},[t._v("从0到1开发一款自己的vscode插件"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/liuxianan/p/vscode-plugin-publish.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("VSCode插件开发全攻略（十）打包、发布、升级"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000017279102",target:"_blank",rel:"noopener noreferrer"}},[t._v("VSCode插件开发梳理"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);