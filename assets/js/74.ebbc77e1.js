(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{526:function(a,s,t){"use strict";t.r(s);var e=t(3),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"nginx配置密码访问网页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置密码访问网页"}},[a._v("#")]),a._v(" Nginx配置密码访问网页")]),a._v(" "),s("p",[a._v("nginx做web服务，但由于安全问题需求，访问网页时需要输入用户名和密码进行认证")]),a._v(" "),s("p",[a._v("实现步骤：")]),a._v(" "),s("h2",{attrs:{id:"_1-安装密码生成工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装密码生成工具"}},[a._v("#")]),a._v(" 1.安装密码生成工具")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(" yum -y install httpd-tools\n")])])]),s("h2",{attrs:{id:"_2-生成用户和密码文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成用户和密码文件"}},[a._v("#")]),a._v(" 2. 生成用户和密码文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ htpasswd -c /usr/local/nginx/password username\n# 回车后输入密码，就自动生成了一个含有账号密码的文件了\n# -c 创建一个加密文件\n")])])]),s("p",[s("code",[a._v("password")]),a._v(" 是文件名称")]),a._v(" "),s("p",[s("code",[a._v("username")]),a._v(" 是自定义用户名")]),a._v(" "),s("h3",{attrs:{id:"查看生成的用户名和密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看生成的用户名和密码"}},[a._v("#")]),a._v(" 查看生成的用户名和密码")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cat /usr/local/nginx/password\n")])])]),s("h3",{attrs:{id:"删除用户和密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除用户和密码"}},[a._v("#")]),a._v(" 删除用户和密码")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ htpasswd -D /usr/local/nginx/password username\n# -D 删除指定的用户\n")])])]),s("h3",{attrs:{id:"修改用户和密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改用户和密码"}},[a._v("#")]),a._v(" 修改用户和密码")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ htpasswd -D /usr/local/nginx/password username\n$ htpasswd -b /usr/local/nginx/password username pass\n# -D 删除指定的用户\n# -b htpassswd命令行中一并输入用户名和密码而不是根据提示输入密码\n# -p htpassswd命令不对密码进行进行加密，即明文密码\n")])])]),s("h2",{attrs:{id:"_3-配置nginx认证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置nginx认证"}},[a._v("#")]),a._v(" 3. 配置Nginx认证")]),a._v(" "),s("p",[a._v("找到 nginx 配置文件，通常默认的配置文件在"),s("code",[a._v("/usr/local/nginx/conf/nginx.conf")]),a._v("，要对整个站点开启验证，需在配置文件中的server加上认证配置\n"),s("code",[a._v("auth_basic")]),a._v(" 和 "),s("code",[a._v("auth_basic_user_file")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('server {\n  listen 80;\n  server_name  localhost;\n  # ...\n  \n  auth_basic "请输入用户和密码"; # 验证时的提示信息\n  auth_basic_user_file /usr/local/nginx/password; # 认证文件\n\n  location / {\n      root   /var/www;\n      index  index.html index.htm;\n  }\n  # ...\n}\n')])])]),s("h2",{attrs:{id:"_4-重启-重载nginx使站点的认证生效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-重启-重载nginx使站点的认证生效"}},[a._v("#")]),a._v(" 4. 重启/重载Nginx使站点的认证生效")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("/usr/local/nginx/sbin/nginx -s reload\n")])])]),s("p",[a._v("参考文章 "),s("a",{attrs:{href:"https://segmentfault.com/a/1190000023086569",target:"_blank",rel:"noopener noreferrer"}},[a._v("Nginx配置密码访问-访问网页需输入用户名密码"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);